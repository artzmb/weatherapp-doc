# Техническое задание

## Требования к используемым инструментам:

- IntelliJ IDEA
- Kotlin
- Gradle Groovy
- OkHttp / Retrofit
- Moshi

## Функциональные требования:

* Приложение должно вызываться из командной строки и иметь следующий синопсис:

`weatherapp -c LATITUDE,LONGITUDE [-f PATH]`

Примеры вызова:

`weatherapp -c 54.1798143,45.1824041`

`weatherapp -c 54.1798143,45.1824041 -f file.text`

`weatherapp -c 54.1798143,45.1824041 -f /home/johhny/file.txt`

Если не используется параметр -f, то значение должно выводиться в консоль.

* Приложение должно возвращать число, равное текущей температуре в градусах Цельсия по данным координатам

Примеры ответа:

`12`

`20`

## Детали реализации

* Необходимо зарегистрироваться на сервисе https://openweathermap.org/ для того, чтобы получить API-ключ
* Для получения текущей температуры можно использовать метод API `GET https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}`
* Таймаут ответа необходимо выставить равным 5 секундам
* Приложение не должно аварийно завершаться ни при каких обстоятельствах и должно вернуть адекватное сообщение об ошибке. Предполагаемые возможные проблемы - некорректный формат аргументов командной строки, сетевая ошибка, ошибка в Http-ответе API
* Запросы должны отправляться напрямую с помощью Okhttp (https://github.com/square/okhttp) или его обертки Retrofit (https://github.com/square/retrofit)
* В ответ на запрос придет JSON-ответ, который необходимо распарсить с помощью библиотеки Moshi (https://github.com/square/moshi)
* Код должен соответствовать соглашению о стиле Kotlin (https://kotlinlang.org/docs/coding-conventions.html)
* Необходимо грамотно декомпозировать код
* Не забудьте в ваш репозиторий добавить .gitignore, можно взять стандартный сгенеренный для IDEA

## Совет

Так как ваш код будет располагаться публично, то API key необходимо как-то спрятать. Предлагаю такой вариант:

Указываете API ключ в качестве переменной окружения вашей ОС

Windows: `setx WEATHER_API_KEY {API key}`

Mac/Linux: `export WEATHER_API_KEY={API key}`

Потом это значение можно забрать программно `System.getenv("WEATHER_API_KEY")`
